var t={d:(e,o)=>{for(var i in o)t.o(o,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:o[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function initOptions(t,e){const o={allowCrossOriginImages:!1,elementsToExclude:[],height:100,originalHeight:100,originalMinXViewBox:"0",originalMinYViewBox:"0",originalWidth:100,pdfOptions:{addTitleToPage:!0,chartCaption:"",customFonts:[],pageLayout:{margins:{bottom:50,left:50,right:50,top:50}},pdfCaptionFontSize:14,pdfTextFontFamily:"Helvetica",pdfTitleFontSize:20},scale:1,transparentBackgroundReplace:"white",useCSS:!0,width:100};if(o.originalHeight=t.style.getPropertyValue("height").includes("%")||t.getAttribute("height")&&t.getAttribute("height")?.includes("%")?t.getBBox().height*o.scale:t.getBoundingClientRect().height*o.scale,o.originalWidth=t.style.getPropertyValue("width").includes("%")||t.getAttribute("width")&&t.getAttribute("width")?.includes("%")?t.getBBox().width*o.scale:t.getBoundingClientRect().width*o.scale,t.getAttribute("viewBox")){const e=Array.from((t.getAttribute("viewBox")??"").matchAll(/\b(\d+)\b/g));o.originalMinXViewBox=e[0]?.[0]??"0",o.originalMinYViewBox=e[1]?.[0]??"0",0===o.originalWidth&&(o.originalWidth=Number(e[2]?.[0])??0),0===o.originalHeight&&(o.originalHeight=Number(e[3]?.[0])??0)}else o.originalMinXViewBox="0",o.originalMinYViewBox="0";return e?.scale&&"number"==typeof e.scale&&(o.scale=e.scale),e?.height?"number"==typeof e.height&&(o.height=e.height*o.scale):o.height=o.originalHeight*o.scale,e?.width?"number"==typeof e.width&&(o.width=e.width*o.scale):o.width=o.originalWidth*o.scale,!1===e?.useCSS&&(o.useCSS=!1),e?.transparentBackgroundReplace&&(o.transparentBackgroundReplace=e.transparentBackgroundReplace),e?.allowCrossOriginImages&&(o.allowCrossOriginImages=e.allowCrossOriginImages),e?.excludeByCSSSelector&&"string"==typeof e.excludeByCSSSelector&&(o.elementsToExclude=Array.from(t.querySelectorAll(e.excludeByCSSSelector))),e?.pdfOptions&&(o.pdfOptions=function initPdfOptions(t,e){const o=e.pdfOptions;t?.pdfOptions&&Object.keys(o).forEach((e=>{if(t.pdfOptions&&"pageLayout"===e){const e={bottom:t.pdfOptions.pageLayout?.margins?.bottom??t.pdfOptions.pageLayout?.margin??o.pageLayout.margins.bottom,left:t.pdfOptions.pageLayout?.margins?.left??t.pdfOptions.pageLayout?.margin??o.pageLayout.margins.left,right:t.pdfOptions.pageLayout?.margins?.right??t.pdfOptions.pageLayout?.margin??o.pageLayout.margins.right,top:t.pdfOptions.pageLayout?.margins?.top??t.pdfOptions.pageLayout?.margin??o.pageLayout.margins.top};o.pageLayout={...t.pdfOptions.pageLayout??{},margins:e}}else t.pdfOptions?.hasOwnProperty(e)&&typeof t.pdfOptions[e]==typeof o[e]&&(t.pdfOptions[e]||0===t.pdfOptions[e])&&(o[e]=t.pdfOptions[e])}));o.pageLayout.size||(o.pageLayout.size=[Math.max(300,e.width)+o.pageLayout.margins.left+o.pageLayout.margins.right,Math.max(300,e.height)+o.pageLayout.margins.top+o.pageLayout.margins.bottom+(o.addTitleToPage?2*o.pdfTitleFontSize+10:0)+(""!==o.chartCaption?4*o.pdfCaptionFontSize+10:0)]);return o}(e,o)),o}function warnError(t){void 0!==typeof console&&"function"==typeof console.warn&&console.warn(t)}async function importDependency(t,e){return async function importDependencyInternal(t,e){try{let e;switch(t){case"canvg":e=await import("canvg"),e.Canvg||(e=void 0);break;case"pdfkit":e="PDFDocument"in window?window.PDFDocument:(await import("pdfkit")).default;break;case"svg-to-pdfkit":e="SVGtoPDF"in window?window.SVGtoPDF:(await import("svg-to-pdfkit")).default;break;case"blob-stream":e="blobStream"in window?window.blobStream:(await import("blob-stream")).default}if(!e)throw new Error("Module is undefined");return e}catch(o){throw warnError(o),new Error(`Error svg-export: ${e} export requires the package "${t}"`)}}(t,e)}function useCSSfromComputedStyles(t,e,o){if("function"!=typeof getComputedStyle)return void warnError("Warning svg-export: this browser is not able to get computed styles");for(const t of o.elementsToExclude)if(t===e)return;const i=window.getComputedStyle(t);if(i.length>0)for(const t of Array.from(i))["width","height","inline-size","block-size","mask-size"].includes(t)||e.style.setProperty(t,i.getPropertyValue(t));t.childNodes.forEach(((t,i)=>{if(1===t.nodeType&&(t instanceof SVGElement||t instanceof HTMLElement)){const n=e.childNodes[i];(n instanceof SVGElement||n instanceof HTMLElement)&&useCSSfromComputedStyles(t,n,o)}}))}function convertImageURLtoDataURI(t,e){return new Promise(((o,i)=>{const n=new Image;n.onload=e=>{const i=e.target,n=document.createElement("canvas");n.width=i.naturalWidth||Number(i.getAttribute("width"))||Number(i.style.getPropertyValue("width"))||300,n.height=i.naturalHeight||Number(i.getAttribute("height"))||Number(i.style.getPropertyValue("height"))||300,n.getContext("2d")?.drawImage(i,0,0);const a=n.toDataURL("image/png");t.setAttribute("href",a),o()},e.allowCrossOriginImages&&(n.crossOrigin="anonymous");const a=t.getAttribute("href")||t.getAttributeNS("http://www.w3.org/1999/xlink","href");a&&(n.src=a)}))}function triggerDownload(t,e){const o=e.replace(/[/\\?%*:|"<>]/g,"_"),i=document.createElement("a");i.download=o,i.href=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}async function downloadSvg(t,e,o){const i=getSvgElement(t);if(!i)return;const n=e??"chart",a=initOptions(i,o),r=i.getElementsByTagName("image"),s=[];if(r)for(const t of Array.from(r))(t.getAttribute("href")&&!t.getAttribute("href")?.includes("data:")||t.getAttribute("xlink:href")&&!t.getAttribute("xlink:href")?.includes("data:"))&&s.push(convertImageURLtoDataURI(t,a));await Promise.all(s);let g=setupSvg(i,t,a);g='<?xml version="1.0" standalone="no"?>\r\n'+g;triggerDownload("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(g),n+".svg")}function getSvgElement(t){const e=document.createElement("div");let o;if(e.className="tempdiv-svg-exportJS","string"==typeof t?(e.insertAdjacentHTML("beforeend",t.trim()),e.firstChild instanceof SVGGraphicsElement&&(o=e.firstChild)):o=t,!o?.nodeType||1!==o.nodeType)return warnError("Error svg-export: The input svg was not recognized"),null;const i=o.cloneNode(!0);return i.style.display="",e.appendChild(i),e.style.visibility="hidden",e.style.display="table",e.style.position="absolute",document.body.appendChild(e),i}function setupSvg(t,e,o,i){o.useCSS&&"object"==typeof e&&(useCSSfromComputedStyles(e,t,o),t.style.display=""),o.elementsToExclude.forEach((t=>{t.remove()})),t.style.width="",t.style.height="",t.setAttribute("width",o.width?.toString()),t.setAttribute("height",o.height?.toString()),t.setAttribute("preserveAspectRatio","none"),t.setAttribute("viewBox",o.originalMinXViewBox+" "+o.originalMinYViewBox+" "+o.originalWidth+" "+o.originalHeight);const n=document.getElementsByClassName("tempdiv-svg-exportJS");for(;n.length>0;)n[0].parentNode?.removeChild(n[0]);if(i)return t;{let e=(new XMLSerializer).serializeToString(t).replace(/currentColor/g,"black");return e.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)||(e=e.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),e.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/)||(e=e.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"')),e}}async function downloadPdf(t,e,o){const i=await importDependency("pdfkit","pdf"),n=await importDependency("blob-stream","pdf"),a=getSvgElement(t);if(!a)return;const r=e??"chart",s=initOptions(a,o),g=setupSvg(a,t,s,!0),l=new i(s.pdfOptions.pageLayout),p=l.pipe(n()),d=a.getElementsByTagName("image"),c=[];if(d)for(const t of Array.from(d))(t.getAttribute("href")&&!t.getAttribute("href")?.includes("data:")||t.getAttribute("xlink:href")&&!t.getAttribute("xlink:href")?.includes("data:"))&&c.push(convertImageURLtoDataURI(t,s));if(await Promise.all(c),s.pdfOptions.customFonts.length>0){const t=function getCustomFonts(t){const e=[];return t.forEach((t=>{const o=new Promise((e=>{const o=new XMLHttpRequest;o.onreadystatechange=()=>{4===o.readyState&&200===o.status&&e(o.response)},o.open("GET",t,!0),o.responseType="arraybuffer",o.send(null)}));e.push(o)})),e}(s.pdfOptions.customFonts.map((t=>t.url)));(await Promise.all(t)).forEach(((t,e)=>{const o=s.pdfOptions.customFonts[e];g.querySelectorAll('[style*="'+o.fontName+'"]').forEach((t=>{t instanceof HTMLElement&&(t.style.fontFamily=o.fontName)})),(o.url.includes(".ttc")||o.url.includes(".dfont"))&&o.styleName?l.registerFont(o.fontName,t,o.styleName):l.registerFont(o.fontName,t)}))}await async function fillPDFDoc(t,e,o,i){i.pdfOptions.addTitleToPage&&(t.font(i.pdfOptions.pdfTextFontFamily).fontSize(i.pdfOptions.pdfTitleFontSize),Array.isArray(i.pdfOptions.pageLayout.size)&&t.text(e,{width:i.pdfOptions.pageLayout.size[0]-i.pdfOptions.pageLayout.margins.left-i.pdfOptions.pageLayout.margins.right}));const n=await importDependency("svg-to-pdfkit","pdf");if(o.style.backgroundColor&&"rgba(0,0,0,0)"!==o.style.backgroundColor.toLowerCase().replace(/\s/g,"")&&"transparent"!==o.style.backgroundColor.toLowerCase()){const e=o.style.backgroundColor;t.rect(i.pdfOptions.pageLayout.margins.left,t.y+10,i.width,i.height).fill(`#${e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)$/)?.slice(1).map(((t,e)=>(3===e?Math.round(255*parseFloat(t)):parseFloat(t)).toString(16).padStart(2,"0").replace("NaN",""))).join("")}`)}n(t,o,i.pdfOptions.pageLayout.margins.left,t.y+10,{width:i.width,height:i.height,preserveAspectRatio:"none",useCSS:i.useCSS}),""!==i.pdfOptions.chartCaption&&(t.font(i.pdfOptions.pdfTextFontFamily).fontSize(i.pdfOptions.pdfCaptionFontSize),Array.isArray(i.pdfOptions.pageLayout.size)&&t.fill("black").text(i.pdfOptions.chartCaption,i.pdfOptions.pageLayout.margins.left,i.pdfOptions.pageLayout.size[1]-i.pdfOptions.pageLayout.margins.bottom-4*i.pdfOptions.pdfCaptionFontSize,{width:i.pdfOptions.pageLayout.size[0]-i.pdfOptions.pageLayout.margins.left-i.pdfOptions.pageLayout.margins.right}))}(l,r,g,s),l.end(),await new Promise((t=>{p.on("finish",(()=>{triggerDownload(p.toBlobURL("application/pdf"),r+".pdf"),t()}))}))}async function downloadPng(t,e,o){return downloadRaster(t,e,"png",o??{})}async function downloadJpeg(t,e,o){return downloadRaster(t,e,"jpeg",o??{})}async function downloadRaster(t,e,o,i){const n=await importDependency("canvg",o),a=getSvgElement(t);if(!a)return;const r=e??"chart",s=document.createElement("canvas");i&&(i.width||i.height)||(i.scale=10);const g=initOptions(a,i),l=a.getElementsByTagName("svg");for(const t of l){const e=Array.from((t.getAttribute("viewBox")??"").matchAll(/\b(\d+)\b/g));let o=t.getAttribute("width"),i=t.getAttribute("height");i||(o&&e[3]?.[0]?t.setAttribute("height",(Number(o)/Number(e[2]?.[0])*Number(e[3]?.[0])).toString()):t.setAttribute("height",g.originalHeight.toString())),o||(i&&!o&&e[2]?.[0]?t.setAttribute("width",(Number(i)/Number(e[3]?.[0])*Number(e[2]?.[0])).toString()):t.setAttribute("width",g.originalWidth.toString()))}let p=setupSvg(a,t,g);const d=a.style.backgroundColor&&"rgba(0,0,0,0)"!==a.style.backgroundColor.toLowerCase().replace(/\s/g,"")&&"transparent"!==a.style.backgroundColor.toLowerCase();"jpeg"===o?p=p.replace(">",'><rect x="0" y="0" width="'+g.width+'" height="'+g.height+'" fill="'+(d?a.style.backgroundColor:g.transparentBackgroundReplace)+'" />'):d&&(p=p.replace(">",'><rect x="0" y="0" width="'+g.width+'" height="'+g.height+'" fill="'+a.style.backgroundColor+'" />'));const c=s.getContext("2d"),u=n.Canvg.fromString(c,p,{anonymousCrossOrigin:g.allowCrossOriginImages});u.start(),await u.ready();triggerDownload(s.toDataURL("image/"+o,1),r+"."+o)}t.d(e,{Tm:()=>downloadJpeg,Ru:()=>downloadPdf,MZ:()=>downloadPng,XX:()=>downloadSvg,rE:()=>o});const o="2.1.0";var i=e.Tm,n=e.Ru,a=e.MZ,r=e.XX,s=e.rE;export{i as downloadJpeg,n as downloadPdf,a as downloadPng,r as downloadSvg,s as version};
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(function(){try{return require("blob-stream")}catch(t){}}(),function(){try{return require("svg-to-pdfkit")}catch(t){}}(),function(){try{return require("pdfkit")}catch(t){}}(),function(){try{return require("canvg")}catch(t){}}()):"function"==typeof define&&define.amd?define("svgExport",["blob-stream","svg-to-pdfkit","pdfkit","canvg"],e):"object"==typeof exports?exports.svgExport=e(function(){try{return require("blob-stream")}catch(t){}}(),function(){try{return require("svg-to-pdfkit")}catch(t){}}(),function(){try{return require("pdfkit")}catch(t){}}(),function(){try{return require("canvg")}catch(t){}}()):t.svgExport=e(t["blob-stream"],t["svg-to-pdfkit"],t.pdfkit,t.canvg)}(self,((t,e,o,n)=>(()=>{"use strict";var i,r,a={498:e=>{if(void 0===t){var o=new Error("Cannot find module 'blob-stream'");throw o.code="MODULE_NOT_FOUND",o}e.exports=t},801:t=>{if(void 0===n){var e=new Error("Cannot find module 'canvg'");throw e.code="MODULE_NOT_FOUND",e}t.exports=n},2:t=>{if(void 0===o){var e=new Error("Cannot find module 'pdfkit'");throw e.code="MODULE_NOT_FOUND",e}t.exports=o},121:t=>{if(void 0===e){var o=new Error("Cannot find module 'svg-to-pdfkit'");throw o.code="MODULE_NOT_FOUND",o}t.exports=e}},s={};function p(t){var e=s[t];if(void 0!==e)return e.exports;var o=s[t]={exports:{}};return a[t](o,o.exports,p),o.exports}r=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,p.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.__esModule)return t;if(16&e&&"function"==typeof t.then)return t}var o=Object.create(null);p.r(o);var n={};i=i||[null,r({}),r([]),r(r)];for(var a=2&e&&t;"object"==typeof a&&!~i.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((e=>n[e]=()=>t[e]));return n.default=()=>t,p.d(o,n),o},p.d=(t,e)=>{for(var o in e)p.o(e,o)&&!p.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},p.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),p.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var l={};function d(t,e){const o={originalWidth:100,originalHeight:100,originalMinXViewBox:"0",originalMinYViewBox:"0",width:100,height:100,scale:1,useCSS:!0,transparentBackgroundReplace:"white",allowCrossOriginImages:!1,elementsToExclude:[],pdfOptions:{customFonts:[],pageLayout:{margin:50},addTitleToPage:!0,chartCaption:"",pdfTextFontFamily:"Helvetica",pdfTitleFontSize:20,pdfCaptionFontSize:14}};if(o.originalHeight=-1!==t.style.getPropertyValue("height").indexOf("%")||t.getAttribute("height")&&-1!==t.getAttribute("height")?.indexOf("%")?t.getBBox().height*o.scale:t.getBoundingClientRect().height*o.scale,o.originalWidth=-1!==t.style.getPropertyValue("width").indexOf("%")||t.getAttribute("width")&&-1!==t.getAttribute("width")?.indexOf("%")?t.getBBox().width*o.scale:t.getBoundingClientRect().width*o.scale,t.getAttribute("viewBox")){const e=Array.from((t.getAttribute("viewBox")??"").matchAll(/\b(\d+)\b/g));o.originalMinXViewBox=e[0]?.[0]??"0",o.originalMinYViewBox=e[1]?.[0]??"0"}else o.originalMinXViewBox="0",o.originalMinYViewBox="0";return e?.scale&&"number"==typeof e.scale&&(o.scale=e.scale),e?.height?"number"==typeof e.height&&(o.height=e.height*o.scale):o.height=o.originalHeight*o.scale,e?.width?"number"==typeof e.width&&(o.width=e.width*o.scale):o.width=o.originalWidth*o.scale,!1===e?.useCSS&&(o.useCSS=!1),e?.transparentBackgroundReplace&&(o.transparentBackgroundReplace=e.transparentBackgroundReplace),e?.allowCrossOriginImages&&(o.allowCrossOriginImages=e.allowCrossOriginImages),e?.excludeByCSSSelector&&"string"==typeof e.excludeByCSSSelector&&(o.elementsToExclude=Array.from(t.querySelectorAll(e.excludeByCSSSelector))),e?.pdfOptions&&(o.pdfOptions=function(t,e){const o=e.pdfOptions;return t?.pdfOptions&&Object.keys(o).forEach((e=>{if(t.pdfOptions&&"pageLayout"===e){o.pageLayout.margins={top:t.pdfOptions.pageLayout?.margins?.top??t.pdfOptions.pageLayout?.margin??o.pageLayout.margin,bottom:t.pdfOptions.pageLayout?.margins?.bottom??t.pdfOptions.pageLayout?.margin??o.pageLayout.margin,left:t.pdfOptions.pageLayout?.margins?.left??t.pdfOptions.pageLayout?.margin??o.pageLayout.margin,right:t.pdfOptions.pageLayout?.margins?.right??t.pdfOptions.pageLayout?.margin??o.pageLayout.margin},delete o.pageLayout.margin;const e={...t.pdfOptions.pageLayout??{}};delete e.margin,delete e.margins,o.pageLayout={...o.pageLayout,...e}}else t.pdfOptions?.hasOwnProperty(e)&&typeof t.pdfOptions[e]==typeof o[e]&&(t.pdfOptions[e]||0===t.pdfOptions[e])&&(o[e]=t.pdfOptions[e])})),o.pageLayout.size||(o.pageLayout.size=[Math.max(300,e.width)+o.pageLayout.margins.left+o.pageLayout.margins.right,Math.max(300,e.height)+o.pageLayout.margins.top+o.pageLayout.margins.bottom+(o.addTitleToPage?2*o.pdfTitleFontSize+10:0)+(""!==o.chartCaption?4*o.pdfCaptionFontSize+10:0)]),o}(e,o)),o}function g(t){void 0!==typeof console&&"function"==typeof console.warn&&console.warn(t)}async function f(t,e){return async function(t,e){try{let e;switch(t){case"canvg":e=await Promise.resolve().then(p.t.bind(p,801,23)),e.Canvg||(e=void 0);break;case"pdfkit":e=window?.PDFDocument??(await Promise.resolve().then(p.t.bind(p,2,23))).default;break;case"svg-to-pdfkit":e=window?.SVGtoPDF??(await Promise.resolve().then(p.t.bind(p,121,23))).default;break;case"blob-stream":e=window?.blobStream??(await Promise.resolve().then(p.t.bind(p,498,23))).default}if(!e)throw new Error("Module is undefined");return e}catch(o){throw g(o),new Error(`Error svg-export: ${e} export requires the package "${t}"`)}}(t,e)}function c(t,e,o){if("function"!=typeof getComputedStyle)return void g("Warning svg-export: this browser is not able to get computed styles");for(let t=0;t<o.elementsToExclude.length;t++)if(o.elementsToExclude[t]===e)return;const n=window.getComputedStyle(t);if(n.length>0)for(const t of Array.from(n))-1===["width","height","inline-size","block-size","mask-size"].indexOf(t)&&e.style.setProperty(t,n.getPropertyValue(t));t.childNodes.forEach(((t,n)=>{if(1===t.nodeType&&(t instanceof SVGElement||t instanceof HTMLElement)){const i=e.childNodes[n];(i instanceof SVGElement||i instanceof HTMLElement)&&c(t,i,o)}}))}function u(t,e){return new Promise(((o,n)=>{const i=new Image;i.onload=e=>{const n=e.target,i=document.createElement("canvas");i.width=n.naturalWidth||Number(n.getAttribute("width"))||Number(n.style.getPropertyValue("width"))||300,i.height=n.naturalHeight||Number(n.getAttribute("height"))||Number(n.style.getPropertyValue("height"))||300,i.getContext("2d")?.drawImage(n,0,0);const r=i.toDataURL("image/png");t.setAttribute("href",r),o()},e.allowCrossOriginImages&&(i.crossOrigin="anonymous");const r=t.getAttribute("href")||t.getAttributeNS("http://www.w3.org/1999/xlink","href");r&&(i.src=r)}))}function h(t,e,o){if(e=e.replace(/[/\\?%*:|"<>]/g,"_"),navigator.msSaveBlob){const n=decodeURIComponent(t.split(",")[1]),i=[],r=t.split(",")[0].split(":")[1].split(";")[0];for(let t=0;t<n.length;t++)i.push(n.charCodeAt(t));let a;a=o?.msToBlob?o.msToBlob():new Blob([new Uint8Array(i)],{type:r}),navigator.msSaveBlob(a,e)}else{const o=document.createElement("a");o.download=e,o.href=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)}}async function m(t,e,o){const n=y(t);if(!n)return;null==e&&(e="chart");const i=d(n,o),r=n.getElementsByTagName("image"),a=[];if(r)for(const t of Array.from(r))(t.getAttribute("href")&&-1===t.getAttribute("href")?.indexOf("data:")||t.getAttribute("xlink:href")&&-1===t.getAttribute("xlink:href")?.indexOf("data:"))&&a.push(u(t,i));await Promise.all(a);let s=w(n,t,i);s='<?xml version="1.0" standalone="no"?>\r\n'+s,h("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(s),e+".svg")}function y(t){const e=document.createElement("div");let o;if(e.className="tempdiv-svg-exportJS","string"==typeof t?(e.insertAdjacentHTML("beforeend",t.trim()),e.firstChild instanceof SVGGraphicsElement&&(o=e.firstChild)):o=t,!o?.nodeType||1!==o.nodeType)return g("Error svg-export: The input svg was not recognized"),null;const n=o.cloneNode(!0);return n.style.display="",e.appendChild(n),e.style.visibility="hidden",e.style.display="table",e.style.position="absolute",document.body.appendChild(e),n}function w(t,e,o,n){o.useCSS&&"object"==typeof e&&(c(e,t,o),t.style.display=""),o.elementsToExclude.forEach((t=>{t.remove()})),t.style.width="",t.style.height="",t.setAttribute("width",o.width?.toString()),t.setAttribute("height",o.height?.toString()),t.setAttribute("preserveAspectRatio","none"),t.setAttribute("viewBox",o.originalMinXViewBox+" "+o.originalMinYViewBox+" "+o.originalWidth+" "+o.originalHeight);const i=document.getElementsByClassName("tempdiv-svg-exportJS");for(;i.length>0;)i[0].parentNode?.removeChild(i[0]);if(n)return t;{let e=(new XMLSerializer).serializeToString(t).replace(/currentColor/g,"black");return e.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)||(e=e.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),e.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/)||(e=e.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"')),e}}async function b(t,e,o){const n=await f("pdfkit","pdf"),i=await f("blob-stream","pdf"),r=y(t);if(!r)return;null==e&&(e="chart");const a=d(r,o),s=w(r,t,a,!0),p=new n(a.pdfOptions.pageLayout),l=p.pipe(i()),g=r.getElementsByTagName("image"),c=[];if(g)for(const t of Array.from(g))(t.getAttribute("href")&&-1===t.getAttribute("href")?.indexOf("data:")||t.getAttribute("xlink:href")&&-1===t.getAttribute("xlink:href")?.indexOf("data:"))&&c.push(u(t,a));if(await Promise.all(c),a.pdfOptions.customFonts.length>0){const t=function(t){const e=[];return t.forEach((t=>{const o=new Promise((e=>{const o=new XMLHttpRequest;o.onreadystatechange=()=>{4===o.readyState&&200===o.status&&e(o.response)},o.open("GET",t,!0),o.responseType="arraybuffer",o.send(null)}));e.push(o)})),e}(a.pdfOptions.customFonts.map((t=>t.url)));(await Promise.all(t)).forEach(((t,e)=>{const o=a.pdfOptions.customFonts[e];s.querySelectorAll('[style*="'+o.fontName+'"]').forEach((t=>{t instanceof HTMLElement&&(t.style.fontFamily=o.fontName)})),-1===o.url.indexOf(".ttc")&&-1===o.url.indexOf(".dfont")||!o.styleName?p.registerFont(o.fontName,t):p.registerFont(o.fontName,t,o.styleName)}))}await async function(t,e,o,n){n.pdfOptions.addTitleToPage&&(t.font(n.pdfOptions.pdfTextFontFamily).fontSize(n.pdfOptions.pdfTitleFontSize),Array.isArray(n.pdfOptions.pageLayout.size)&&t.text(e,{width:n.pdfOptions.pageLayout.size[0]-n.pdfOptions.pageLayout.margins.left-n.pdfOptions.pageLayout.margins.right})),(await f("svg-to-pdfkit","pdf"))(t,o,n.pdfOptions.pageLayout.margins.left,t.y+10,{width:n.width,height:n.height,preserveAspectRatio:"none",useCSS:n.useCSS}),""!==n.pdfOptions.chartCaption&&(t.font(n.pdfOptions.pdfTextFontFamily).fontSize(n.pdfOptions.pdfCaptionFontSize),Array.isArray(n.pdfOptions.pageLayout.size)&&t.text(n.pdfOptions.chartCaption,n.pdfOptions.pageLayout.margins.left,n.pdfOptions.pageLayout.size[1]-n.pdfOptions.pageLayout.margins.bottom-4*n.pdfOptions.pdfCaptionFontSize,{width:n.pdfOptions.pageLayout.size[0]-n.pdfOptions.pageLayout.margins.left-n.pdfOptions.pageLayout.margins.right}))}(p,e,s,a),p.end(),await new Promise((t=>{l.on("finish",(()=>{h(l.toBlobURL("application/pdf"),e+".pdf"),t()}))}))}async function O(t,e,o){return x(t,e,"png",o)}async function v(t,e,o){return x(t,e,"jpeg",o)}async function x(t,e,o,n){const i=await f("canvg",o);"png"!==o&&"jpeg"!==o&&(o="png");const r=y(t);if(!r)return;null==e&&(e="chart");const a=document.createElement("canvas");n&&(n.width||n.height)||(n||(n={}),n.scale=10);const s=d(r,n);let p=w(r,t,s);"jpeg"===o&&(p=p.replace(">",'><rect x="0" y="0" width="'+s.width+'" height="'+s.height+'" fill="'+s.transparentBackgroundReplace+'"/>'));const l=a.getContext("2d"),g=i.Canvg.fromString(l,p,{anonymousCrossOrigin:s.allowCrossOriginImages});g.start(),await g.ready(),h(a.toDataURL("image/"+o),e+"."+o,a)}p.r(l),p.d(l,{downloadJpeg:()=>v,downloadPdf:()=>b,downloadPng:()=>O,downloadSvg:()=>m,version:()=>S});const S="2.0.0";return l})()));